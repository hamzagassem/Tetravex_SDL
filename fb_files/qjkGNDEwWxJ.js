/*!CK:2257701321!*//*1427810207,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["wsxtp"]); }

__d("ShareDialogAttachment.react",["React","cx","emptyFunction","fbt","Link.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ShareDialogAttachment",propTypes:{overflowing:m.bool,onExpand:m.func,onCollapse:m.func},getDefaultProps:function(){return {overflowing:false,onExpand:i,onCollapse:i};},getInitialState:function(){return {expanded:false};},_toggle:function(){if(this.state.expanded){this.props.onCollapse();}else this.props.onExpand();this.setState({expanded:!this.state.expanded});},render:function(){var o;if(this.props.overflowing){var p;if(this.state.expanded){p=g.createElement("span",null,g.createElement("span",{className:"_u_1"},"↑")," ",j._("R\u00e9duire"));}else p=g.createElement("span",null,j._("Afficher tout")," ",g.createElement("span",{className:"_u_1"},"↓"));o=g.createElement("p",{className:"_u_2"},g.createElement(k,{className:"_u_3",onClick:this._toggle},p));}var q=(("_u_4")+(this.props.overflowing&&!this.state.expanded?' '+"_u_5":''));return (g.createElement("div",{className:q},o,this.props.children));}});e.exports=n;},null);
__d("ShareDialogFooter.react",["DOM","LeftRight.react","React","ShareDialogAudience.react","ShareDialogDataSources","ShareDialogTaggerButtons.react","ShareDialogTaggerTypes","XUIDialogFooter.react","XUIDialogCancelButton.react","XUIDialogCloseButton.react","XUIDialogButton.react","XUIButton.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=j.TYPES,w=i,x=w.PropTypes,y=i.createClass({displayName:"ShareDialogFooter",propTypes:{activeAudience:function(z){if(!v.isValid(z.activeAudience))return new Error('The active audience is invalid.');},activeTagger:function(z){if(!m.isValid(z.activeTagger))return new Error('The active tagger is invalid.');},status:x.shape({type:x.string.isRequired,title:x.oneOfType([x.string,x.object]),message:x.oneOfType([x.string,x.object])}).isRequired,audienceTargets:x.array,dataSources:x.instanceOf(k),hasDoing:x.bool,hasPeople:x.bool,hasFeeling:x.bool,hasPlace:x.bool,onCancel:x.func,onPost:x.func,onPrivacyChange:x.func,onTaggerClick:x.func,privacySelector:x.any,showDoingNUX:x.bool,renderInline:x.bool},getDefaultProps:function(){return {onPost:t,onCancel:t,onTaggerClick:t,status:{type:'composing'},renderInline:false};},_layerHack:function(){if(this.refs&&this.refs.privacySelector){g.setContent(i.findDOMNode(this.refs.privacySelector),this.props.privacySelector);}else setTimeout(this._layerHack,100);},componentDidMount:function(){if(this.props.activeAudience===v.OWN)this._layerHack();},componentWillReceiveProps:function(z){if(this.props.activeAudience!==z.activeAudience&&z.activeAudience===v.OWN)this._layerHack();if(this.props.status.type==='error'&&z.status.type==='composing')this._layerHack();},getPrivacyValue:function(){if(this.refs.privacySelector){var z=i.findDOMNode(this.refs.privacySelector);return g.scry(z,'input').filter(function(aa){return aa.name==='privacyx';})[0].value;}return null;},render:function(){if(this.props.status.type==='success')return i.createElement("noscript",null);if(this.props.status.type==='error')return this.props.renderInline?i.createElement("noscript",null):i.createElement(n,{className:"_8js"},i.createElement("div",{className:"_4-88"},i.createElement(p,{use:"confirm"})));var z=this.props.status.type==='posting',aa=this.props.activeAudience,ba=this.props.sharerType,ca;if(aa===v.OWN&&ba!=='page_viewer')ca=(i.createElement("div",{ref:"privacySelector",className:"_8ju"}));var da;if(z){da=aa===v.MESSAGE?u._("Envoi en cours"):u._("Publication en cours");}else da=aa===v.MESSAGE?u._("Envoyer"):u._("Publier");var ea=(aa!==v.OWN&&aa!==v.PAGE)&&!this.props.audienceTargets,fa=(aa===v.OWN||aa===v.PERSON||aa===v.PAGE)?i.createElement(l,{activeTagger:this.props.activeTagger,hasPeople:this.props.hasPeople,hasPlace:this.props.hasPlace,hasFeeling:this.props.hasFeeling,hasDoing:this.props.hasDoing,onTaggerClick:this.props.onTaggerClick,dataSources:this.props.dataSources,showDoingNUX:this.props.showDoingNUX}):i.createElement("noscript",null);if(this.props.renderInline){return (i.createElement("div",{className:"_8js"},i.createElement(h,null,z?i.createElement("noscript",null):fa,i.createElement(h,null,z?i.createElement("noscript",null):ca,i.createElement("div",{className:"_4-88"},i.createElement(r,{label:da,disabled:z||ea,type:"button",use:"confirm",onClick:this.props.onPost}))))));}else return (i.createElement(n,{className:"_8js",leftContent:z?i.createElement("noscript",null):fa},i.createElement(h,null,z?i.createElement("noscript",null):ca,i.createElement("div",{className:"_4-88"},i.createElement(o,{disabled:z,action:"cancel",onClick:this.props.onCancel}),i.createElement(q,{label:da,disabled:z||ea,use:"confirm",onClick:this.props.onPost})))));}});e.exports=y;},null);
__d("ShareDialogTitle.react",["React","ShareDialogAudience.react","ShareDialogAudienceText.react","ShareDialogDataSources","ShareDialogAudienceSelector.react","XUICloseButton.react","XUIDialogTitle.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=h.TYPES,r=j.TYPES,s=g,t=s.PropTypes,u=g.createClass({displayName:"ShareDialogTitle",propTypes:{activeAudience:function(v){if(!q.isValid(v.activeAudience))return new Error('The active audience is invalid.');},status:t.shape({type:t.string.isRequired,title:t.oneOfType([t.string,t.object]),message:t.oneOfType([t.string,t.object])}).isRequired,dataSources:t.instanceOf(j),onAudienceSelect:t.func,onClose:t.func,renderInline:t.bool},getDefaultProps:function(){return {onAudienceSelect:o,onClose:o,status:{type:'composing'},renderInline:false};},render:function(){var v=this.props.dataSources,w=this.props.activeAudience,x=[];if(this.props.sharerType==='message_only'){x.push(q.MESSAGE);}else if(this.props.sharerType==='page_only'){x.push(q.PAGE);}else if(this.props.sharerType==='page_viewer'){x.push(q.OWN);}else{x.push(q.OWN);if(v.getSource(r.PERSON_WALL))x.push(q.PERSON);if(v.getSource(r.GROUP))x.push(q.GROUP);if(v.getSource(r.PAGE))x.push(q.PAGE);if(v.getSource(r.MESSAGE))x.push(q.MESSAGE);}var y;if(this.props.status.type==='composing'){y=g.createElement(k,{allowedAudiences:x,activeAudience:w,onAudienceSelect:this.props.onAudienceSelect});}else if(this.props.status.type==='posting'){y=g.createElement(i,{className:"_4zt0",audience:w});}else if(this.props.status.type==='error'){y=g.createElement("span",{className:"_4zt0"},this.props.status.title||p._("Nous sommes d\u00e9sol\u00e9s."));}else if(this.props.status.type==='success')return g.createElement("noscript",null);if(this.props.renderInline){return (g.createElement("div",{className:"_5t22"},y));}else return (g.createElement(m,{showCloseButton:false,className:"_5t22"},y,g.createElement(l,{className:"_51-t",label:p._("Fermer"),onClick:this.props.onClose})));}});e.exports=u;},null);
__d("ShareDialogTaggerViewMixin",["React","TypeaheadViewPropTypes","Vector","cx","getScrollPosition"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={propTypes:h,getDefaultProps:function(){return {role:'listbox'};},_renderItem:function(m){var n=m===this.props.highlightedEntry,o=this.getItemImpl();return (g.createElement(o,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight}));},_onRenderHighlight:function(m){var n=g.findDOMNode(this.refs.list),o=k(n),p=i.getElementDimensions(m),q=i.getElementDimensions(n),r=Math.floor(q.y/p.y),s=0;for(var t=0;t<n.childNodes.length;t++)if(n.childNodes[t]===m)s=t;var u=s*p.y;if(u<o.y){n.scrollTop=u;}else if(u>=(o.y+(r*p.y)))n.scrollTop=(s-r+1)*p.y;this.props.onRenderHighlight(m);},render:function(){var m=(("_4jp9")+(' '+"_599r")+(!this.props.entries.length?' '+"_599s":'')),n=this.props.entries.map(this._renderItem);return (g.createElement("ul",{className:m,id:this.props.ariaOwneeID,role:this.props.role,ref:"list"},n));}};e.exports=l;},null);
__d("ShareDialogActionTaggerItem.react",["ImageBlock.react","React","TypeaheadViewItem","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"ShareDialogActionTaggerItem",mixins:[i.Mixin],propTypes:i.propTypes,render:function(){var m=this.props.entry,n=m.getAuxiliaryData(),o=h.createElement("span",{dangerouslySetInnerHTML:n.icon}),p=(("_599m")+(' '+"_5mne")+(this.props.highlighted?' '+"_599n":'')+(this.props.highlighted?' '+"_zk5":''));p=k(p,this.props.className);return (h.createElement("li",{"aria-selected":this.props.highlighted,className:p,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},h.createElement(g,{spacing:"medium"},o,h.createElement("div",{className:"_599p"},m.getTitle()))));}});e.exports=l;},null);
__d("ShareDialogActionTaggerView.react",["React","ShareDialogTaggerViewMixin","ShareDialogActionTaggerItem.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ShareDialogActionTaggerView",mixins:[h],getItemImpl:function(){return i;}});e.exports=j;},null);
__d("ShareDialogActionTaggerPresenter",["ShareDialogActionTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true,layerPosition:'above'};},null);
__d("ShareDialogActionTagger.react",["React","XUITypeahead.react","ShareDialogActionTaggerPresenter","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g,n=m.PropTypes,o=g.createClass({displayName:"ShareDialogActionTagger",propTypes:{dataSource:n.object,action:n.object,onSelect:n.func},getDefaultProps:function(){return {onSelect:k};},getInitialState:function(){return {action:this.props.action,query:this.props.action?this.props.action.getTitle():''};},componentWillReceiveProps:function(p){if(p.action&&this.props.action!==p.action)this.setState({action:p.action});},_onChange:function(event){this.setState({query:event.target.value});},_onSelect:function(p){this.setState({action:p,query:p.getTitle()});this.props.onSelect(p);},_onClear:function(){this.setState({action:null,query:null});this.props.onSelect(null);},render:function(){return (g.createElement("div",{className:"_1dla _2rlv"},g.createElement(h,{presenter:i,focusedOnInit:true,showEntriesOnFocus:true,selectedEntry:this.state.action,placeholder:l._("Qu\u2019\u00eates-vous en train de faire\u00a0?"),className:"_2qvi _1dlb",queryString:this.state.query,searchSource:this.props.dataSource,onSelectAttempt:this._onSelect,onClear:this._onClear,onChange:this._onChange,tallInput:true})));}});e.exports=o;},null);
__d("ShareDialogTaggerView.react",["React","ShareDialogTaggerViewMixin","XUITypeaheadViewItem.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ShareDialogTaggerView",mixins:[h],getItemImpl:function(){return i;}});e.exports=j;},null);
__d("ShareDialogTaggerPresenter",["ShareDialogTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true,layerPosition:'above'};},null);
__d("ShareDialogObjectTagger.react",["Grid.react","React","RegexMatchSearchSource","ShareDialogTaggerPresenter","WebAsyncPlusRegexSearchSource","WebAsyncSearchSource","XUITypeahead.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g.GridItem,q=h,r=q.PropTypes,s=h.createClass({displayName:"ShareDialogObjectTagger",propTypes:{userId:r.string.isRequired,action:r.object,object:r.object,onClearAction:r.func,onSelect:r.func},getDefaultProps:function(){return {onActionReset:o,onSelect:o};},getInitialState:function(){return {query:this.props.object?this.props.object.getTitle():'',object:this.props.object};},componentWillReceiveProps:function(t){if(t.object&&this.props.object!==t.object)this.setState({object:t.object});},componentDidMount:function(){var t=new l({getAllForEmptyQuery:true,bootstrapRequests:[{uri:'/ajax/metacomposer/attachment/og/typeahead/query/object_loader',data:{at_id:this.props.action.getUniqueID(),is_bootstrap:true,query:this.state.query,viewer:this.props.userId}}],queryRequests:[{uri:'/ajax/metacomposer/attachment/og/typeahead/query/object_loader',data:{at_id:this.props.action.getUniqueID(),query:this.state.query,is_bootstrap:false,viewer:this.props.userId}}]}),u=new i('.+'),v=new k({asyncSource:t,regexSource:u});this.setState({dataSource:v});},_onChange:function(event){this.setState({query:event.target.value});},_onSelect:function(t){this.setState({object:t,query:t.getTitle()});this.props.onSelect(t);},_onClear:function(){this.setState({object:null,query:null});this.props.onSelect(null);},focusInput:function(){if(this.refs.typeahead&&!this.state.object)setTimeout(this.refs.typeahead.focusInput,1);},render:function(){if(!this.state.dataSource)return h.createElement("noscript",null);var t=this.props.action.getAuxiliaryData(),u=t?t.prompt:'';return (h.createElement(g,{cols:2,className:"_20qo _2rlv"},h.createElement(p,{onClick:this._onClear,className:"_27tc",key:"prefix"},this.props.action.getTitle()),h.createElement(p,{className:"_2mzr",key:"suffix"},h.createElement(m,{presenter:j,clearable:true,focusedOnInit:true,showEntriesOnFocus:true,selectedEntry:this.state.object,placeholder:u,className:"_2qvi _20qp",ref:"typeahead",queryString:this.state.query,searchSource:this.state.dataSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onChange:this._onChange,onClear:this._onClear,tallInput:true}))));}});e.exports=s;},null);