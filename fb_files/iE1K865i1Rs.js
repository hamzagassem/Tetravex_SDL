/*!CK:1075055459!*//*1427927086,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["PAglg"]); }

__d("ShareDialogAttribution.react",["React","cx","emptyFunction","fbt","Link.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ShareDialogAttribution",propTypes:{name:m.string,onRemove:m.func},getDefaultProps:function(){return {onRemove:i};},_onRemove:function(){this.props.onRemove();},render:function(){return (g.createElement("div",{className:"_5qio"},g.createElement("span",null,j._("via"))," ",this.props.name," "+' '+"(",g.createElement(k,{onClick:this._onRemove},j._("supprimer")),")"));}});e.exports=n;},null);
__d("ShareDialogAudienceTypes",["getObjectValues"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={OWN:'own',PERSON:'person',GROUP:'group',PAGE:'page',MESSAGE:'message'},i=g(h);e.exports=h;e.exports.ALL=i;e.exports.isValid=function(j){return i.some(function(k){return k===j;});};},null);
__d("ShareDialogDataSources",["getObjectValues"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={ACTION:'actionSource',FEELING:'feelingSource',GROUP:'groupSource',MENTIONS:'mentionsSource',MESSAGE:'messageSource',OBJECT:'objectSource',PAGE:'pageSource',PERSON:'personSource',PERSON_WALL:'personWallSource',PLACE:'placeSource'},i=g(h);function j(){"use strict";this.$ShareDialogDataSources0={};}j.prototype.addSource=function(k,l){"use strict";if(i.some(function(m){return k===m;}))this.$ShareDialogDataSources0[k]=l;return this;};j.prototype.getSource=function(k){"use strict";return this.$ShareDialogDataSources0[k];};j.TYPES=h;e.exports=j;},null);
__d("ShareDialogMessageAudience.react",["Grid.react","React","XUITokenizer.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g.GridItem,m=h,n=m.PropTypes,o=h.createClass({displayName:"ShareDialogMessageAudience",propTypes:{searchSource:n.object.isRequired,userId:n.string,onClear:n.func,onChange:n.func,messageTargets:n.array},getInitialState:function(){return {entries:[]};},render:function(){return (h.createElement(g,{className:"_2qx6",cols:2},h.createElement(l,{className:"_1ho1",key:"prefix"},h.createElement("span",{className:"_2qx7"},k._("\u00c0\u00a0:"))),h.createElement(l,{className:"_1xk6",key:"suffix"},h.createElement(i,h.__spread({},this.props,{className:"_39y9 _42z0",placeholder:k._("Noms"),name:"audience_message",inputID:"audience_message",value:this.state.entries,focusedOnInit:true,selectOnTab:false,showEntriesOnFocus:false,entries:this.state.entries,searchSource:this.props.searchSource,onRemoveEntryAttempt:this._onRemoveEntryAttempt,onAddEntryAttempt:this._onAddEntryAttempt})))));},componentDidMount:function(){var p=this.props.messageTargets;if(p)for(var q=0;q<p.length;++q)if(p[q])this._onAddEntryAttempt(p[q]);},_onAddEntryAttempt:function(p){var q=p.getUniqueID(),r=this.state.entries,s=r.some(function(t){if(t.getUniqueID()===q)return true;});if(s)return;r.push(p);this.props.onChange(r.map(function(t){return t.getUniqueID();}));this.setState({entries:r});},_onRemoveEntryAttempt:function(p){var q=p.getUniqueID(),r=this.state.entries,s=r.some(function(t){if(t.getUniqueID()===q)return true;});if(s)r.splice(r.indexOf(p),1);this.props.onChange(r.map(function(t){return t.getUniqueID();}));if(r.length===0)this.props.onClear();this.setState({entries:r});}});e.exports=o;},null);
__d("ShareDialogAudienceTypeahead.react",["Grid.react","React","XUITypeahead.react","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g.GridItem,n=h,o=n.PropTypes,p=h.createClass({displayName:"ShareDialogAudienceTypeahead",propTypes:{searchSource:o.object.isRequired,userId:o.string,prefix:o.string,onClear:o.func,onChange:o.func},getDefaultProps:function(){return {onClear:k,onChange:k};},getInitialState:function(){return {query:'',selectedEntry:null};},_onBlur:function(){if(!this.state.selectedEntry||this.state.selectedEntry.getTitle()!==this.state.query)this._clearSelection();},_clearSelection:function(){this.setState({query:'',selectedEntry:null});this.props.onClear();},render:function(){var q=this.props,r=q.className,s=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(q,{className:1}),t=!!this.state.selectedEntry,u={};if(this.props.userId)u[this.props.userId]=true;var v=this.props.prefix?h.createElement("span",{className:"_2qx7"},this.props.prefix):h.createElement("noscript",null),w=this.props.prefix?"_2qx6":null;return (h.createElement(g,{className:w,cols:2},h.createElement(m,{key:"prefix",className:"_1ho1"},v),h.createElement(m,{key:"suffix",className:"_1xk6"},h.createElement(i,h.__spread({},s,{className:l(r,(("_39y9")+(t?' '+"_39ya":''))),excludedEntries:u,onChange:this._onChange,onClear:this._onClear,onBlur:this._onBlur,onSelectAttempt:this._onSelect,queryString:this.state.query,searchSource:this.props.searchSource,focusedOnInit:true,showEntriesOnFocus:false,clearable:true,selectedEntry:this.state.selectedEntry,tallInput:true})))));},_onSelect:function(q){this.setState({query:q.getTitle(),selectedEntry:q});this.props.onChange([q.getUniqueID()]);},_onChange:function(event){var q=event.target.value;if(this.state.selectedEntry&&this.state.selectedEntry.getTitle()!==q){this.setState({query:q,selectedEntry:null});}else this.setState({query:q});},_onClear:function(){this.setState({query:'',selectedEntry:null});this.props.onClear();}});e.exports=p;},null);
__d("ShareDialogGroupAudience.react",["React","ShareDialogAudienceTypeahead.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"ShareDialogGroupAudience",propTypes:{searchSource:l.object.isRequired,onClear:l.func,onSelect:l.func},getInitialState:function(){return {query:'',selectedEntry:null};},render:function(){var n=j._("Groupe\u00a0:");return (g.createElement(h,g.__spread({},this.props,{prefix:n,showPhoto:true,name:"audience_group",inputID:"audience_group",className:"_2n3i",placeholder:j._("Nom du groupe")})));}});e.exports=m;},null);
__d("ShareDialogPersonAudience.react",["React","ShareDialogAudienceTypeahead.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"ShareDialogPersonAudience",propTypes:{searchSource:l.object.isRequired,userId:l.string,onClear:l.func,onSelect:l.func},render:function(){var n=j._("Ami(e)\u00a0:");return (g.createElement(h,g.__spread({},this.props,{prefix:n,searchSource:this.props.searchSource,className:"_4heg",name:"audience_person",inputID:"audience_person",clearable:true,placeholder:j._("Nom de l\u2019ami(e)")})));}});e.exports=m;},null);
__d("ShareDialogPageAudience.react",["React","Image.react","LeftRight.react","ShareActorSelector.react","XUISelector.react","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g,q=p.PropTypes,r=k.Option,s=g.createClass({displayName:"ShareDialogPageAudience",propTypes:{searchSource:q.object.isRequired,onClear:q.func,onSelect:q.func},getInitialState:function(){return {pages:null,selectedPageID:null,selectedActorID:null,onClear:m,onChange:m};},componentWillMount:function(){this.props.searchSource.bootstrap(function(){if(this.props.searchSource.getAllEntriesMap){var t=this.props.searchSource.getAllEntriesMap(),u=o(t)[0];this.setState({pages:t,selectedPageID:u.getUniqueID(),selectedActorID:u.getUniqueID()});}}.bind(this));},render:function(){if(!this.state.pages)return g.createElement("span",null);var t=o(this.state.pages).map(function(u){return (g.createElement(r,{key:u.getUniqueID(),value:u.getUniqueID(),icon:g.createElement(h,{src:u.getPhoto(),height:15,width:15})},u.getTitle()));});return (g.createElement("div",{className:"_15u8"},g.createElement(i,null,g.createElement(k,{className:"_15u9",name:"audience_page",inputID:"audience_page",maxheight:150,value:this.state.selectedPageID,defaultValue:this.state.selectedPageID,onChange:function(u){this.setState({selectedPageID:u.value});this.props.onChange([{pageId:u.value,actorId:this.state.selectedActorID}]);}.bind(this)},t),g.createElement("span",null,g.createElement("strong",{className:"_15ua"},n._("Publie en tant que"),' '),g.createElement(j,{name:"audience_page_identity",onChange:function(u){this.setState({selectedActorID:u.value});this.props.onChange([{pageId:this.state.selectedPageID,actorId:u.value}]);}.bind(this),targetID:this.state.selectedPageID})))));}});e.exports=s;},null);
__d("ShareDialogAudience.react",["React","ShareDialogAudienceTypes","ShareDialogDataSources","ShareDialogMessageAudience.react","ShareDialogGroupAudience.react","ShareDialogPersonAudience.react","ShareDialogPageAudience.react","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=i.TYPES,p=g,q=p.PropTypes,r=g.createClass({displayName:"ShareDialogAudience",propTypes:{activeAudience:function(s){if(!h.isValid(s.activeAudience))return new Error('The active audience is invalid.');},messageTargets:q.array,userId:q.string,dataSources:q.instanceOf(i),onClear:q.func,onChange:q.func},getDefaultProps:function(){return {dataSources:new i(),onClear:n,onChange:n};},render:function(){var s=this.props.dataSources;if(s.getSource(o.MESSAGE)&&this.props.activeAudience===h.MESSAGE)return (g.createElement(j,{userId:this.props.userId,onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:s.getSource(o.MESSAGE),messageTargets:this.props.messageTargets}));if(s.getSource(o.PERSON_WALL)&&this.props.activeAudience===h.PERSON)return (g.createElement(l,{userId:this.props.userId,onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:s.getSource(o.PERSON_WALL)}));if(s.getSource(o.GROUP)&&this.props.activeAudience===h.GROUP)return (g.createElement(k,{onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:s.getSource(o.GROUP)}));if(s.getSource(o.PAGE)&&this.props.activeAudience===h.PAGE)return (g.createElement(m,{onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:s.getSource(o.PAGE)}));return g.createElement("span",null);}});e.exports=r;e.exports.TYPES=h;},null);
__d("ShareDialogTaggerTypes",["getObjectValues"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={NONE:'none',PEOPLE:'people',PLACE:'place',DOING:'doing',FEELING:'feeling'},i=g(h);e.exports=h;e.exports.ALL=i;e.exports.isValid=function(j){return i.some(function(k){return k===j;});};},null);
__d("ShareDialogTaggerButtons.react",["ComposerXNUX","React","ShareDialogDataSources","ShareDialogTaggerTypes","TooltipLink.react","XUIAmbientNUX.react","cx","fbt","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=h,q=p.PropTypes,r=h.createClass({displayName:"ShareDialogTaggerButtons",propTypes:{activeTagger:function(s){if(!j.isValid(s.activeTagger))return new Error('The active tagger is invalid.');},dataSources:q.instanceOf(i),hasPeople:q.bool,hasPlace:q.bool,hasFeeling:q.bool,hasDoing:q.bool,onTaggerClick:q.func,showDoingNUX:q.bool},getDefaultProps:function(){return {activeTagger:j.NONE,onTaggerClick:o};},getInitialState:function(){return {activeTagger:this.props.activeTagger,dataSources:this.props.dataSources,showDoingNUX:false};},componentWillReceiveProps:function(s){this.setState({activeTagger:s.activeTagger,dataSources:s.dataSources,showDoingNUX:s.showDoingNUX});},componentDidMount:function(){if(this.props.showDoingNUX)setTimeout(function(){this.setState({showDoingNUX:true});}.bind(this),1000);},_taggerClick:function(s){var t=s;if(this.state.activeTagger===s)t=j.NONE;this.setState({activeTagger:t});this.props.onTaggerClick(t);},_onPeopleTaggerClick:function(){this._taggerClick(j.PEOPLE);},_onPlaceTaggerClick:function(){this._taggerClick(j.PLACE);},_onFeelingTaggerClick:function(){this._taggerClick(j.FEELING);},_onOpenGraphTaggerClick:function(){this._taggerClick(j.DOING);},_onDoingNUXClose:function(){this.setState({showDoingNUX:false});g.sendMarkSeenRequest(g.SHARER_MINUTIAE_NUX);},render:function(){var s=this.state.dataSources,t=null,u=null,v=null,w=null,x=null;if(!s)return null;var y=n._("Add what you're doing or how you're feeling"),z=!!s.getSource(i.TYPES.FEELING);if(s.getSource(i.TYPES.PERSON))t=h.createElement(k,{onClick:this._onPeopleTaggerClick,tooltip:n._("Identifier des personnes dans votre publication"),className:(("_2pjs")+(' '+"_jku")+(this.props.hasPeople?' '+"_jkv":'')+(this.state.activeTagger===j.PEOPLE?' '+"_jkw":''))},h.createElement("span",{className:"_jkx"},n._("Identifier des personnes")));if(s.getSource(i.TYPES.PLACE))u=h.createElement(k,{onClick:this._onPlaceTaggerClick,tooltip:n._("Add a location to your post"),className:(("_2pjs")+(' '+"_jky")+(this.props.hasPlace?' '+"_jkv":'')+(this.state.activeTagger===j.PLACE?' '+"_jkw":''))},h.createElement("span",{className:"_jkx"},n._("Tag a location")));if(s.getSource(i.TYPES.FEELING)){y=n._("Add what you're doing");v=h.createElement(k,{onClick:this._onFeelingTaggerClick,tooltip:n._("Share how you feel about this"),className:(("_2pjs")+(' '+"_34fh")+(this.props.hasFeeling?' '+"_jkv":'')+(this.state.activeTagger===j.FEELING?' '+"_jkw":''))},h.createElement("span",{className:"_jkx"},n._("Share how you feel")));}if(s.getSource(i.TYPES.ACTION)&&s.getSource(i.TYPES.OBJECT)){if(this.state.showDoingNUX&&this.refs.doingButton)x=h.createElement(l,{context:h.findDOMNode(this.refs.doingButton),onCloseButtonClick:this._onDoingNUXClose,position:"above",shown:true},n._("Nouveau\u00a0! Vous pouvez choisir de partager vos humeurs et vos activit\u00e9s."));w=h.createElement(k,{ref:"doingButton",onClick:this._onOpenGraphTaggerClick,tooltip:y,className:(("_2pjs")+(z?' '+"_4lr0":'')+(!z?' '+"_34fh":'')+(this.props.hasDoing?' '+"_jkv":'')+(this.state.activeTagger===j.DOING?' '+"_jkw":''))},h.createElement("span",{className:"_jkx"},y));}if(!t&&!u&&!w&&!v)return null;return (h.createElement("div",{className:"_5fj8"},t,u,v,w,x));}});e.exports=r;},null);
__d("ShareDialogInput.react",["cx","React","ShareDialogDataSources","ShareDialogAudienceTypes","MentionsInput.Experimental.react","XUITypeaheadView.react","createEmptyEditorState","getMentionsTextForContentState","getMentionsInputDecorator","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=h,r=q.PropTypes,s=h.createClass({displayName:"ShareDialogInput",propTypes:{activeAudience:function(t){if(!j.isValid(t.activeAudience))return new Error('The active audience is invalid.');},dataSources:r.instanceOf(i)},getInitialState:function(){return {editorState:m(o()),dataSource:this.props.dataSources.getSource(i.TYPES.MENTIONS)};},componentWillReceiveProps:function(t){if(t.activeAudience===j.MESSAGE){this.setState({dataSource:null});}else this.setState({dataSource:this.props.dataSources.getSource(i.TYPES.MENTIONS)});},onChange:function(t){this.setState({editorState:t});},onBlur:function(){var t=this.state.editorState.getCurrentContent(),u=n(t);if(this.props.onBlur)this.props.onBlur(u);},render:function(){return (h.createElement(k,{mentionsSource:this.state.dataSource,className:p(this.props.className,"_3s-5"),editorState:this.state.editorState,typeaheadView:l,placeholder:"Say something about this...",selectOnTab:false,spellCheck:true,onBlur:this.onBlur,onChange:this.onChange}));}});e.exports=s;},null);
__d("ShareDialogMetricMixin",["BanzaiScuba","React","Vector"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=null,k=null,l=null,m={_logHeights:function(event,n,o,p){var q=i.getViewportDimensions(),r=new g('osric_dimensions');r.addNormal('fbid',n);r.addNormal('event',event);r.addInteger('viewport_height',q.y);r.addInteger('screen_height',window.screen.height);if(o&&h.findDOMNode(o)){var s=i.getElementDimensions(h.findDOMNode(o));r.addInteger('dialog_height',s.y);}if(p&&h.findDOMNode(p)){var t=i.getElementDimensions(h.findDOMNode(p));r.addInteger('attachment_height',t.y);}r.post();},logLoadHeights:function(){this._logHeights('load',this.props.postId,this.refs.dialog,this.refs.attachment);},logPostHeights:function(){this._logHeights('post',this.props.postId,this.refs.dialog,this.refs.attachment);},logCancelHeights:function(){this._logHeights('cancel',this.props.postId,this.refs.dialog,this.refs.attachment);}};e.exports=m;},null);
__d("ShareDialogTagSummary.react",["React","AsyncRequest","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"ShareDialogTagSummary",propTypes:{people:l.array,place:l.object,action:l.object,object:l.object,feeling:l.object,actionIconId:l.string,feelingIconId:l.string},getInitialState:function(){return {socialText:null};},componentWillReceiveProps:function(n){if(!(n.people&&n.people.length>0)&&!(n.place)&&!(n.feeling)&&!(n.action&&n.object)){if(this.state.socialText)this.setState({socialText:null});return;}this._socialTextRequest=new h();var o={};if(n.people)o.people=n.people.map(function(r){return r.getUniqueID();});if(n.place)o.place=n.place.getTitle();if(n.feeling)o.feelingID=n.feeling.getUniqueID();if(n.feelingIconId)o.feelingIconID=n.feelingIconId;if(n.action&&n.object){o.actionID=n.action.getUniqueID();var p=n.object.getUniqueID(),q=n.object.getTitle();if(!p||p===q){o.objectStr=q;}else o.objectID=p;}if(n.actionIconId)o.actionIconID=n.actionIconId;this._socialTextRequest.setURI('/ajax/metacomposer/social_text.php').setData(o).setHandler(this._handleSocialText).send();},_handleSocialText:function(n){this.setState({socialText:n.getPayload().rendered});},render:function(){var n=j(this.props.className,"_3qg0");return (g.createElement("div",{className:n,dangerouslySetInnerHTML:this.state.socialText}));}});e.exports=m;},null);
__d("ShareDialogPeopleTagger.react",["cx","emptyFunction","fbt","React","Grid.react","XUITokenizer.react","ShareDialogTaggerPresenter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=k.GridItem,o=j,p=o.PropTypes,q=j.createClass({displayName:"ShareDialogPeopleTagger",propTypes:{userId:p.string.isRequired,dataSource:p.object,initialPeople:p.array,onSelect:p.func},getDefaultProps:function(){return {onSelect:h,initialPeople:[]};},getInitialState:function(){return {people:this.props.initialPeople};},componentWillReceiveProps:function(r){if(r.initialPeople&&this.props.initialPeople!==r.initialPeople)this.setState({people:r.initialPeople});},_onAdd:function(r){var s=this.state.people,t=r.getUniqueID(),u=s.some(function(v){return v.getUniqueID()===t;});if(u){return;}else{s.push(r);this.setState({people:s});}this.props.onSelect(s);},_onRemove:function(r){var s=this.state.people,t=s.indexOf(r);if(t==-1)return;s.splice(t,1);this.setState({people:s});this.props.onSelect(s);},render:function(){var r={};r[this.props.userId]=true;return (j.createElement(k,{cols:2,className:"_o2h _2rlv"},j.createElement(n,{className:"_27tc",key:"prefix"},i._("Avec")),j.createElement(n,{className:"_2mzr",key:"suffix"},j.createElement(l,{presenter:m,focusedOnInit:true,excludedEntries:r,entries:this.state.people,className:"_2qvi _2qvj",placeholder:i._("Avec qui \u00eates-vous\u00a0?"),searchSource:this.props.dataSource,onAddEntryAttempt:this._onAdd,onRemoveEntryAttempt:this._onRemove}))));}});e.exports=q;},null);
__d("ShareDialogPlaceTagger.react",["cx","emptyFunction","fbt","React","Grid.react","XUITypeahead.react","ShareDialogTaggerPresenter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=k.GridItem,o=j,p=o.PropTypes,q=j.createClass({displayName:"ShareDialogPlaceTagger",propTypes:{dataSource:p.object,initialPlace:p.object,onSelect:p.func,useCheckinBranding:p.bool},getDefaultProps:function(){return {onSelect:h};},getInitialState:function(){return {place:this.props.initialPlace,query:this.props.initialPlace?this.props.initialPlace.getTitle():''};},componentWillReceiveProps:function(r){if(r.initialPlace&&this.props.initialPlace!==r.initialPlace)this.setState({place:r.initialPlace});},_onChange:function(event){this.setState({query:event.target.value});},_onSelect:function(r){this.setState({place:r,query:r.getTitle()});this.props.onSelect(r);},_onClear:function(){this.setState({place:null,query:null});this.props.onSelect(null);},render:function(){return (j.createElement(k,{cols:2,className:"_5d39 _2rlv"},j.createElement(n,{className:"_27tc",key:"prefix"},i._("\u00c0")),j.createElement(n,{className:"_2mzr",key:"suffix"},j.createElement(l,{presenter:m,clearable:true,focusedOnInit:true,showEntriesOnFocus:true,selectedEntry:this.state.place,placeholder:this.props.useCheckinBranding?i._("O\u00f9 \u00e9tait-ce\u00a0?"):i._("O\u00f9 \u00eates-vous\u00a0?"),className:"_2qvi _2qvk",queryString:this.state.query,searchSource:this.props.dataSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onClear:this._onClear,onChange:this._onChange,tallInput:true}))));}});e.exports=q;},null);
__d("ShareDialogTagger.react",["React","ShareDialogDataSources","ShareDialogTaggerTypes","ShareDialogPeopleTagger.react","ShareDialogPlaceTagger.react","ShareDialogActionTagger.react","ShareDialogObjectTagger.react","ShareDialogFeelingTagger.react","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g,q=p.PropTypes,r=g.createClass({displayName:"ShareDialogTagger",propTypes:{activeTagger:function(s){if(!i.isValid(s.activeTagger))return new Error('The active tagger is invalid.');},dataSources:q.instanceOf(h),userId:q.string.isRequired,initialPeople:q.array,initialPlace:q.object,initialAction:q.object,initialObject:q.object,initialFeeling:q.object,onSelectPeople:q.func,onSelectPlace:q.func,onSelectAction:q.func,onSelectObject:q.func,onSelectFeeling:q.func,useCheckinBranding:q.bool},getDefaultProps:function(){return {activeTagger:i.NONE,initialPeople:[],onClearAction:o,onSelectPeople:o,onSelectPlace:o,onSelectAction:o,onSelectObject:o,onSelectFeeling:o};},getInitialState:function(){return {people:this.props.initialPeople,place:this.props.initialPlace,action:this.props.initialAction,object:this.props.initialObject,feeling:this.props.initialFeeling};},componentDidUpdate:function(){if(this.refs.objectTagger)this.refs.objectTagger.focusInput();},componentWillReceiveProps:function(s){this.setState({people:s.initialPeople,place:s.initialPlace,action:s.initialAction,object:s.initialObject,feeling:s.initialFeeling});},_onSelectPeople:function(s){this.setState({people:s});this.props.onSelectPeople(s);},_onSelectPlace:function(s){this.setState({place:s});this.props.onSelectPlace(s);},_onClearAction:function(){this.setState({action:null});},_onSelectAction:function(s){this.setState({action:s});this.props.onSelectAction(s);},_onSelectObject:function(s){this.setState({object:s});this.props.onSelectObject(s);},_onSelectFeeling:function(s){this.setState({feeling:s});this.props.onSelectFeeling(s);},render:function(){var s=this.props.dataSources;if(this.props.activeTagger===i.PEOPLE){var t=s.getSource(h.TYPES.PERSON);if(!t)return g.createElement("noscript",null);return (g.createElement(j,{userId:this.props.userId,dataSource:t,initialPeople:this.state.people,onSelect:this._onSelectPeople}));}else if(this.props.activeTagger===i.PLACE){var u=s.getSource(h.TYPES.PLACE);if(!u)return g.createElement("noscript",null);return (g.createElement(k,{dataSource:u,initialPlace:this.state.place,onSelect:this._onSelectPlace,useCheckinBranding:this.props.useCheckinBranding}));}else if(this.props.activeTagger===i.FEELING){var v=s.getSource(h.TYPES.FEELING);if(!v)return g.createElement("noscript",null);return (g.createElement(n,{dataSource:v,initialFeeling:this.state.feeling,onSelect:this._onSelectFeeling}));}else if(this.props.activeTagger===i.DOING){var w=s.getSource(h.TYPES.ACTION),x=s.getSource(h.TYPES.OBJECT);if(!w||!x)return g.createElement("noscript",null);return (g.createElement("div",null,this.state.action?g.createElement("noscript",null):g.createElement(l,{dataSource:w,action:this.state.action,onSelect:this._onSelectAction}),this.state.action?g.createElement(m,{ref:"objectTagger",action:this.state.action,dataSource:x,object:this.state.object,onClearAction:this._onClearAction,onSelect:this._onSelectObject,userId:this.props.userId}):g.createElement("noscript",null)));}return g.createElement("noscript",null);}});e.exports=r;},null);
__d("ShareDialogAudienceSelector.react",["arrayContains","cx","emptyFunction","React","ShareDialogAudienceText.react","ShareDialogAudienceTypes","XUIMenuSeparator.react","XUISelector.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=j,p=o.PropTypes,q=n.Option,r=j.createClass({displayName:"ShareDialogAudienceSelector",propTypes:{allowedAudiences:function(s){if(!(s.allowedAudiences.every(function(t){return l.isValid(t);})))return new Error('The allowed audiences are not valid.');},activeAudience:function(s){if(!l.isValid(s.activeAudience)||!(s.allowedAudiences.some(function(t){return t===s.activeAudience;})))return new Error('The active audience is either invalid or not included in the '+'allowed audience list.');},onAudienceSelect:p.func},getDefaultProps:function(){return {onAudienceSelect:i,activeAudience:l.OWN,allowedAudiences:l.ALL};},getInitialState:function(){return {activeAudience:this.props.activeAudience};},componentWillReceiveProps:function(s){this.setState({activeAudience:s.activeAudience});},onChange:function(s){this.setState({activeAudience:s.value});this.props.onAudienceSelect(s.value);},render:function(){var s=this.props.allowedAudiences,t=[];if(s.length==1)return (j.createElement("div",{className:"_94t"},j.createElement("div",{className:"_42ym _41kd"},j.createElement(k,{audience:this.props.activeAudience}))));if(g(s,l.OWN))t.push(j.createElement(q,{className:"_42ym _42yn",value:l.OWN,key:l.OWN},j.createElement(k,{audience:l.OWN})));if(g(s,l.PERSON))t.push(j.createElement(q,{className:"_42ym _42yp",value:l.PERSON,key:l.PERSON},j.createElement(k,{audience:l.PERSON})));if(g(s,l.GROUP))t.push(j.createElement(q,{className:"_42ym _2n3i",value:l.GROUP,key:l.GROUP},j.createElement(k,{audience:l.GROUP})));if(g(s,l.PAGE))t.push(j.createElement(q,{className:"_42ym _42y_",value:l.PAGE,key:l.PAGE},j.createElement(k,{audience:l.PAGE})));if(g(s,l.MESSAGE)){if(t.length>0)t.push(j.createElement(m,{key:"separator"}));t.push(j.createElement(q,{className:"_42ym _42z0",value:l.MESSAGE,key:l.MESSAGE},j.createElement(k,{audience:l.MESSAGE})));}var u=(("_94t")+(this.state.activeAudience===l.OWN?' '+"_47xt":'')+(this.state.activeAudience===l.PERSON?' '+"_47xu":'')+(this.state.activeAudience===l.GROUP?' '+"_47xv":'')+(this.state.activeAudience===l.PAGE?' '+"_47xw":'')+(this.state.activeAudience===l.MESSAGE?' '+"_47xx":''));return (j.createElement(n,{maxwidth:400,className:u,defaultValue:this.state.activeAudience,name:"audience_selector",onChange:this.onChange},t));}});e.exports=r;},null);
__d("ShareDialog.react",["Arbiter","DialogExpansionAtWidth","DOM","LayerAutoFocus","LayerFadeOnHide","OGComposerJSConstants","React","ShareDialogAttachment.react","ShareDialogAttribution.react","ShareDialogAudience.react","ShareDialogDataSources","ShareDialogFooter.react","ShareDialogInput.react","ShareDialogMetricMixin","ShareDialogTaggerTypes","ShareDialogTagSummary.react","ShareDialogTagger.react","ShareDialogTitle.react","XUIDialog.react","XUIDialogBody.react","XUINotice.react","XUISpinner.react","containsNode","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=p.TYPES,ha=m,ia=ha.PropTypes,ja=400,ka=m.createClass({displayName:"ShareDialog",mixins:[t],propTypes:{postId:ia.string.isRequired,shareType:ia.string.isRequired,privacySelector:ia.any.isRequired,status:ia.shape({type:ia.string.isRequired,title:ia.oneOfType([ia.string,ia.object]),message:ia.oneOfType([ia.string,ia.object])}).isRequired,userId:ia.string.isRequired,attachment:ia.object,dataSources:ia.instanceOf(q),messageTags:ia.array,messageTargets:ia.array,onCancel:ia.func,onPost:ia.func,publicityWarning:ia.object,sharerType:ia.oneOf(['all_modes','message_only','page_only']),showDoingNUX:ia.bool,via:ia.object,renderInline:ia.bool,useCheckinBranding:ia.bool},getDefaultProps:function(){return {onCancel:ea,onPost:ea,sharerType:'all_modes',shown:false,status:{type:'composing'},renderInline:false};},getInitialState:function(){var la=ga.OWN;if(this.props.sharerType==='message_only'){la=ga.MESSAGE;}else if(this.props.sharerType==='page_only')la=ga.PAGE;return {activeAudience:la,activeTagger:u.NONE,action:null,actorId:this.props.userId,audienceTargets:null,expanded:false,feeling:null,isPosting:false,message:'',object:null,people:[],place:null,shareType:this.props.shareType,status:this.props.status,via:this.props.via};},componentWillMount:function(){this._updateNubOffset(this.props.shareLinkNode);this.setState({shown:true});},componentWillReceiveProps:function(la){this._updateNubOffset(la.shareLinkNode);if(!la.dataSources.getSource(q.TYPES.PERSON))this.setState({people:[]});if(!la.dataSources.getSource(q.TYPES.PLACE))this.setState({place:null});if(!la.dataSources.getSource(q.TYPES.FEELING))this.setState({feeling:null});if(!la.dataSources.getSource(q.TYPES.ACTION)||!la.dataSources.getSource(q.TYPES.OBJECT))this.setState({action:null,object:null});this.setState({shown:la.shown,overflowing:this.refs.attachment?m.findDOMNode(this.refs.attachment).clientHeight>ja:false,activeTagger:u.NONE,status:la.status});},componentDidMount:function(){this.reflowSubscription=g.subscribe('inlineShare/reflow',function(){this._updateNubOffset(this.props.shareLinkNode);}.bind(this));this.ogSubscription=g.subscribe('composer/ogCustomIconSelected',function(event,ma){if(ma.triggerElement&&!ca(m.findDOMNode(this),ma.triggerElement))return;if(ma.action_type_id===l.ActionTypeIDs.COMPOSER_FEELS&&this.props.dataSources.getSource(q.TYPES.FEELING)){this.setState({feelingIconId:ma.icon_id});}else this.setState({actionIconId:ma.icon_id});}.bind(this));var la=false;if(this.props.attachment&&this.refs.attachment){i.setContent(m.findDOMNode(this.refs.attachment),this.props.attachment);la=m.findDOMNode(this.refs.attachment).clientHeight>ja;}this.setState({loaded:true,overflowing:la});this.logLoadHeights();},componentWillUnmount:function(){if(this.reflowSubscription)this.reflowSubscription.unsubscribe();if(this.ogSubscription)this.ogSubscription.unsubscribe();},_onTaggerClick:function(la){this.setState({activeTagger:la});},_onSelectPeople:function(la){this.setState({people:la});},_onSelectPlace:function(la){this.setState({place:la,activeTagger:u.NONE});},_onSelectAction:function(la){this.setState({action:la});},_onSelectObject:function(la){var ma={object:la,activeTagger:u.NONE};if(la==null)ma.actionIconId=null;this.setState(ma);},_onSelectFeeling:function(la){this.setState({feeling:la,activeTagger:u.NONE});},_onRemoveAttribution:function(){this.setState({via:null});},_onAudienceSelect:function(la){if(la===ga.GROUP||la===ga.MESSAGE){this.setState({activeAudience:la,activeTagger:u.NONE,audienceTargets:null,actorId:this.props.userId,people:[],place:null,action:null,object:null});}else this.setState({activeAudience:la,audienceTargets:null,actorId:this.props.userId});},_onChangeAudienceTargets:function(la){if(this.state.activeAudience===ga.PAGE){this.setState({audienceTargets:[la[0].pageId],actorId:la[0].actorId});}else this.setState({audienceTargets:la,actorId:this.props.userId});},_onClearAudienceTargets:function(){this.setState({audienceTargets:null});},_onBlur:function(la){this.setState({message:la});},_onExpand:function(){this.setState({expanded:true});},_onCollapse:function(){this.setState({expanded:false});},_getStatefulResponse:function(){var la=this.state,ma=la.people.map(function(sa){return sa.getUniqueID();}),na=null,oa=null;if(la.object){var pa=la.object.getUniqueID(),qa=la.object.getTitle();if(!pa||pa===qa){oa=qa;}else na=pa;}var ra={appId:this.props.appId,sharedAdId:this.props.sharedAdId,actorId:this.state.actorId,postId:this.props.postId,shareType:this.props.shareType,message:la.message,audienceType:la.activeAudience,audienceTargets:la.audienceTargets?la.audienceTargets:[],taggedPeople:ma,taggedPlace:la.place?la.place.getUniqueID():null,taggedActionId:la.action?la.action.getUniqueID():null,taggedActionIconId:this.state.actionIconId,taggedFeelingIconId:this.state.feelingIconId,taggedFeelingId:la.feeling?la.feeling.getUniqueID():null,taggedObjectId:na,taggedObjectStr:oa,attributionId:this.state.via?this.state.via.id:null,messageTags:this.props.messageTags};if(this.refs.footer)ra.privacy=this.refs.footer.getPrivacyValue();return ra;},_onCancel:function(){this.setState({shown:false});this.props.onCancel(this._getStatefulResponse());if(this.props.logHeight)this.logCancelHeights();},_onPost:function(){this.props.onPost(this._getStatefulResponse());this.setState({isPosting:true});if(this.props.logHeight)this.logPostHeights();},_getMessage:function(){var la=null;if(this.state.status.type==='error'){la=this.state.status.message||fa._("This post could not be shared at this time. Please try again later.");}else if(this.state.status.type==='success'){la=this.state.status.message||fa._("Your share was posted.");if(this.state.shown)setTimeout(function(){this.setState({shown:false});}.bind(this),2500);}if(la){if(la.__html)return m.createElement("span",{dangerouslySetInnerHTML:la});return m.createElement("span",null,la);}return null;},_getWarning:function(){var la=m.createElement("noscript",null);if(this.props.publicityWarning)la=m.createElement(aa,{className:"_2nt0",size:"small"},m.createElement("span",{dangerouslySetInnerHTML:this.props.publicityWarning}));return la;},_getAttribution:function(){var la=m.createElement("noscript",null);if(this.state.via&&this.state.via.name&&this.state.activeAudience!==ga.MESSAGE)la=m.createElement(o,{onRemove:this._onRemoveAttribution,name:this.props.via.name});return la;},_getOverlay:function(){var la=m.createElement("noscript",null);if(this.state.status.type==='posting')la=m.createElement("div",{className:"_51jk"},m.createElement(ba,{size:"large",className:"_51jl"}));return la;},_getAttachment:function(){var la=m.createElement("noscript",null);if(!this.props.renderInline)la=m.createElement(n,{onCollapse:this._onCollapse,overflowing:this.state.overflowing,onExpand:this._onExpand},m.createElement("article",{ref:"attachment",className:"_51jo"}));return la;},render:function(){var la=m.createElement(x,{activeAudience:this.state.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this._onAudienceSelect,onClose:this._onCancel,sharerType:this.props.sharerType,status:this.state.status,renderInline:this.props.renderInline}),ma=m.createElement(r,{activeAudience:this.state.activeAudience,activeTagger:this.state.activeTagger,audienceTargets:this.state.audienceTargets,dataSources:this.props.dataSources,hasDoing:this.state.action!==null&&this.state.object!==null,hasPeople:this.state.people.length>0,hasPlace:this.state.place!==null,hasFeeling:this.state.feeling!==null,onCancel:this._onCancel,onPost:this._onPost,onTaggerClick:this._onTaggerClick,privacySelector:this.props.privacySelector,ref:"footer",status:this.state.status,sharerType:this.props.sharerType,showDoingNUX:this.props.showDoingNUX,renderInline:this.props.renderInline});if(this.props.renderInline){return (m.createElement("li",{className:"_2nt1"},m.createElement("div",{className:"_2phu",style:{left:this.state.nubOffset}}),la,this._getInlineBody(),ma));}else return (m.createElement(y,{shown:this.state.shown,width:496,behaviors:{DialogExpansion:h,LayerFadeOnHide:k,LayerAutoFocus:j},layerHideOnBlur:false,modal:true,className:"_51jd"},m.createElement("div",{ref:"dialog"},la,this._getDialogBody(),ma)));},_updateNubOffset:function(la){if(!la)return 0;var ma=12,na=la.offsetLeft,oa=la.offsetWidth/2,pa=8,qa=Math.round(ma+na+oa-pa);this.setState({nubOffset:qa});},_getInlineBody:function(){var la=this._getMessage();if(la)return (m.createElement("div",{className:"_2pid _2pin",ref:"message"},la));return (m.createElement("div",{className:"_2nt2"},this._getBodyContent()));},_getDialogBody:function(){var la=this._getMessage();if(la)return (m.createElement(z,{ref:"message"},la));return (m.createElement(z,{className:"_51jm"},this._getBodyContent()));},_getBodyContent:function(){var la=this._getWarning(),ma=this._getAttribution(),na=this._getOverlay(),oa=this._getAttachment();return (m.createElement("div",null,m.createElement(p,{userId:this.props.userId,activeAudience:this.state.activeAudience,messageTargets:this.props.messageTargets,dataSources:this.props.dataSources,onChange:this._onChangeAudienceTargets,onClear:this._onClearAudienceTargets}),m.createElement(s,{activeAudience:this.state.activeAudience,className:"_2nt3 autofocus",dataSources:this.props.dataSources,initialValue:this.state.message,onBlur:this._onBlur}),m.createElement(v,{people:this.state.people,place:this.state.place,action:this.state.action,object:this.state.object,feeling:this.state.feeling,actionIconId:this.state.actionIconId,feelingIconId:this.state.feelingIconId,onIconChange:this._onIconChange}),ma,oa,la,m.createElement(w,{activeTagger:this.state.activeTagger,dataSources:this.props.dataSources,initialPeople:this.state.people,initialPlace:this.state.place,initialAction:this.state.action,initialObject:this.state.object,initialFeeling:this.state.feeling,onSelectPeople:this._onSelectPeople,onSelectPlace:this._onSelectPlace,onSelectAction:this._onSelectAction,onSelectObject:this._onSelectObject,onSelectFeeling:this._onSelectFeeling,userId:this.props.userId,useCheckinBranding:this.props.useCheckinBranding}),na));}});e.exports=ka;},null);
__d("ShareDialogController",["ActorURI","AsyncRequest","Event","React","ShareDialog.react","ShareDialogDataSources","XShareDialogSubmitController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n,o;function p(){s({type:'posting'});}function q(u){s({type:'success',message:u.payload.message});}function r(u){s({type:'error',title:u.errorSummary,message:u.errorDescription});}function s(u){j.render(j.createElement(k,j.__spread({},n,{shown:true,onPost:function(v){t.onPost(v,p,q,r);},status:u})),o);}var t={getPropsFromAsyncResponse:function(u){var v=u,w=v.sources,x=(function(ka,la){var ma={},na=Object.prototype.hasOwnProperty;if(ka==null)throw new TypeError();for(var oa in ka)if(na.call(ka,oa)&&!na.call(la,oa))ma[oa]=ka[oa];return ma;})(v,{sources:1}),y=w,z=y.person,aa=y.personTag,ba=y.personWall,ca=y.group,da=y.page,ea=y.mentions,fa=y.place,ga=y.feeling,ha=y.action,ia=y.object,ja=(new l()).addSource(l.TYPES.ACTION,ha).addSource(l.TYPES.GROUP,ca).addSource(l.TYPES.FEELING,ga).addSource(l.TYPES.MENTIONS,ea).addSource(l.TYPES.MESSAGE,z).addSource(l.TYPES.OBJECT,ia).addSource(l.TYPES.PAGE,da).addSource(l.TYPES.PERSON,aa).addSource(l.TYPES.PERSON_WALL,ba).addSource(l.TYPES.PLACE,fa);return Object.assign({dataSources:ja},x);},onPost:function(u,v,w,x){v&&v();var y=m.getURIBuilder().setInt('app_id',u.appId||(n&&n.appId)).setInt('post_id',u.postId).setInt('share_type',u.shareType).setInt('shared_ad_id',u.sharedAdId||(n&&n.sharedAdId)).setString('privacy',u.privacy).setString('message',u.message).setString('audience_type',u.audienceType).setIntVector('audience_targets',u.audienceTargets).setIntVector('tagged_people',u.taggedPeople).setInt('tagged_place',u.taggedPlace).setInt('tagged_action',u.taggedActionId).setInt('tagged_object',u.taggedObjectId).setInt('tagged_feeling',u.taggedFeelingId).setInt('tagged_feeling_icon',u.taggedFeelingIconId).setString('tagged_object_str',u.taggedObjectStr).setInt('tagged_action_icon',u.taggedActionIconId).setInt('attribution',u.attributionId).setStringVector('messaging_tags',u.messageTags).getURI();y=g.create(y,u.actorId);(new h()).setURI(y).setMethod('POST').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(w).setErrorHandler(x).send();},setup:function(u,v){n=t.getPropsFromAsyncResponse(u);o=v;s({type:'composing'});},setupInline:function(u,v){var w=t.getPropsFromAsyncResponse(u);i.fire(v,'propsReceived',{props:w});}};e.exports=t;},null);